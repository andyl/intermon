---
test_unit:
  desc: Tests for Elixir Project
  monitor_command: watchexec -c -w live -w test -e ex,exs,eex,heex "<%= worker_command %>"
  worker_command: mix test <%= worker_flags %> <%= worker_opts %> --stale ; echo ---
  exit_regex: /^---$/
  worker_flags:
    focus: 
      alias: f
      desc: Run only focus tests
      long: |
        Only run specific tests, using ExUnit's `tag` feature

            @tag focus
            test "mytest" do 
              assert 1 == 1
            end
      default: false
      output: "--only focus:true" 
  worker_opts:
    pattern:
      alias: p 

test_unit_umbrella: 
  desc: For Elixir Umbrella Project
  cmd: watchexec -c -e ex,exs,eex,heex "mix test --stale"

